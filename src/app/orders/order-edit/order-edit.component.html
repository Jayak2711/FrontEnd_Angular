<form [formGroup]="orderForm" (ngSubmit)="updateOrder()">
    <div formArrayName="products" class="mb-3">
        <div *ngFor="let product of products.controls; let i = index;" [formGroupName]="i">
            <div class="mb-3">
                <label>Product: </label>
                <select formControlName="productId" class="form-select" (change)="updateTotalPrice()">
                    <option value="">Select a product</option>
                    <option *ngFor="let pro of availableProducts" [value]="pro.id">{{ pro.name }} {{ pro.price |
                        currency:'INR' }}</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="quantity">Quantity:</label>
                <input type="number" id="quantity" formControlName="quantity" class="form-control"
                    (change)="updateTotalPrice()" />
            </div>
            <div class="mb-3">
                <button type="button" (click)="removeProduct(i)" class="btn btn-danger btn-sm">Remove Product</button>
            </div>
        </div>
    </div>
    <div class="mb-3">
        <button type="button" (click)="addProduct()" class="btn btn-success btn-sm">Add Product</button>
    </div>
    <div class="mb-3">
        <label for="totalPrice">Total Price:</label>
        <input type="number" formControlName="totalPrice" class="form-control" readonly />
    </div>
    <div class="mb-3">
        <label for="date">Date:</label>
        <input type="date" formControlName="date" class="form-control" />
    </div>
    <div class="mb-3">
        <label for="status">Status:</label>
        <input type="text" formControlName="status" class="form-control" />
    </div>
    <div class="mb-3">
        <button type="submit" [disabled]="!orderForm.valid" class="btn btn-success btn-sm">Update Order</button>
    </div>
</form>